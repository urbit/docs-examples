{"ast":null,"code":"import { useState } from 'react';\nimport useFocusManagerBase from '@restart/hooks/useFocusManager';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport useMounted from '@restart/hooks/useMounted';\nimport matches from 'dom-helpers/matches';\n\nconst isInDisabledFieldset = node => {\n  return !!node && matches(node, 'fieldset[disabled] *');\n};\n\nexport default function useFocusManager(ref) {\n  let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const isMounted = useMounted();\n  const [focused, setFocus] = useState(false);\n  const isDisabled = useEventCallback(() => props.disabled === true || isInDisabledFieldset(ref.current));\n  const events = useFocusManagerBase(Object.assign({}, opts, {\n    isDisabled,\n    onChange: focused => {\n      if (isMounted()) setFocus(focused);\n    },\n\n    didHandle(focused, event) {\n      let handler = props[focused ? 'onFocus' : 'onBlur'];\n      if (handler) handler(event); // @ts-ignore used by work\n\n      if (opts.didHandle && !event.isWidgetDefaultPrevented) opts.didHandle(focused, event);\n    }\n\n  }));\n  return [events, focused, setFocus];\n}","map":{"version":3,"sources":["/home/mike/proj/frontend/ui/node_modules/react-widgets/esm/useFocusManager.js"],"names":["useState","useFocusManagerBase","useEventCallback","useMounted","matches","isInDisabledFieldset","node","useFocusManager","ref","props","opts","isMounted","focused","setFocus","isDisabled","disabled","current","events","Object","assign","onChange","didHandle","event","handler","isWidgetDefaultPrevented"],"mappings":"AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,mBAAP,MAAgC,gCAAhC;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,OAAP,MAAoB,qBAApB;;AAEA,MAAMC,oBAAoB,GAAGC,IAAI,IAAI;AACnC,SAAO,CAAC,CAACA,IAAF,IAAUF,OAAO,CAACE,IAAD,EAAO,sBAAP,CAAxB;AACD,CAFD;;AAIA,eAAe,SAASC,eAAT,CAAyBC,GAAzB,EAAqD;AAAA,MAAvBC,KAAuB,uEAAf,EAAe;AAAA,MAAXC,IAAW,uEAAJ,EAAI;AAClE,QAAMC,SAAS,GAAGR,UAAU,EAA5B;AACA,QAAM,CAACS,OAAD,EAAUC,QAAV,IAAsBb,QAAQ,CAAC,KAAD,CAApC;AACA,QAAMc,UAAU,GAAGZ,gBAAgB,CAAC,MAAMO,KAAK,CAACM,QAAN,KAAmB,IAAnB,IAA2BV,oBAAoB,CAACG,GAAG,CAACQ,OAAL,CAAtD,CAAnC;AACA,QAAMC,MAAM,GAAGhB,mBAAmB,CAACiB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBT,IAAlB,EAAwB;AACzDI,IAAAA,UADyD;AAEzDM,IAAAA,QAAQ,EAAER,OAAO,IAAI;AACnB,UAAID,SAAS,EAAb,EAAiBE,QAAQ,CAACD,OAAD,CAAR;AAClB,KAJwD;;AAMzDS,IAAAA,SAAS,CAACT,OAAD,EAAUU,KAAV,EAAiB;AACxB,UAAIC,OAAO,GAAGd,KAAK,CAACG,OAAO,GAAG,SAAH,GAAe,QAAvB,CAAnB;AACA,UAAIW,OAAJ,EAAaA,OAAO,CAACD,KAAD,CAAP,CAFW,CAEK;;AAE7B,UAAIZ,IAAI,CAACW,SAAL,IAAkB,CAACC,KAAK,CAACE,wBAA7B,EAAuDd,IAAI,CAACW,SAAL,CAAeT,OAAf,EAAwBU,KAAxB;AACxD;;AAXwD,GAAxB,CAAD,CAAlC;AAcA,SAAO,CAACL,MAAD,EAASL,OAAT,EAAkBC,QAAlB,CAAP;AACD","sourcesContent":["import { useState } from 'react';\nimport useFocusManagerBase from '@restart/hooks/useFocusManager';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport useMounted from '@restart/hooks/useMounted';\nimport matches from 'dom-helpers/matches';\n\nconst isInDisabledFieldset = node => {\n  return !!node && matches(node, 'fieldset[disabled] *');\n};\n\nexport default function useFocusManager(ref, props = {}, opts = {}) {\n  const isMounted = useMounted();\n  const [focused, setFocus] = useState(false);\n  const isDisabled = useEventCallback(() => props.disabled === true || isInDisabledFieldset(ref.current));\n  const events = useFocusManagerBase(Object.assign({}, opts, {\n    isDisabled,\n    onChange: focused => {\n      if (isMounted()) setFocus(focused);\n    },\n\n    didHandle(focused, event) {\n      let handler = props[focused ? 'onFocus' : 'onBlur'];\n      if (handler) handler(event); // @ts-ignore used by work\n\n      if (opts.didHandle && !event.isWidgetDefaultPrevented) opts.didHandle(focused, event);\n    }\n\n  }));\n  return [events, focused, setFocus];\n}"]},"metadata":{},"sourceType":"module"}