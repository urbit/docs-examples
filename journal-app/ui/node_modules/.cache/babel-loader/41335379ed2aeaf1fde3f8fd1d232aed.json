{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport cn from 'classnames';\nimport React, { useEffect, useRef } from 'react';\nimport dates from './dates';\nimport useFocusManager from './useFocusManager';\n\nfunction clamp(date, min, max) {\n  return dates.max(dates.min(date, max), min);\n}\n\nfunction CalendarView(_ref) {\n  let {\n    className,\n    focusedItem,\n    onKeyDown,\n    children,\n    'aria-labelledby': labelledby\n  } = _ref;\n  const ref = useRef(null);\n  const [focusEvents, focused] = useFocusManager(ref);\n  useEffect(() => {\n    var _node$querySelector;\n\n    const node = ref.current;\n    if (!node || !focused) return;\n    (_node$querySelector = node.querySelector('.rw-cell[tabindex]')) == null ? void 0 : _node$querySelector.focus();\n  }, [focusedItem, focused, ref]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    role: \"grid\",\n    ref: ref,\n    tabIndex: -1\n  }, focusEvents, {\n    onKeyDown: onKeyDown,\n    \"aria-labelledby\": labelledby,\n    className: cn(className, 'rw-nav-view', 'rw-calendar-grid')\n  }), children);\n}\n\nfunction CalendarViewCell(_ref2) {\n  let {\n    onChange,\n    min,\n    max,\n    date,\n    unit,\n    disabled,\n    selected,\n    focusedItem,\n    viewUnit,\n    children,\n    label\n  } = _ref2;\n\n  const isEqual = nextDate => dates.eq(date, nextDate, unit);\n\n  const isEmpty = !dates.inRange(date, min, max, unit);\n  const isDisabled = disabled || isEmpty; // const isNow = now && isEqual(now)\n\n  const isFocused = !disabled && !isEmpty && isEqual(focusedItem);\n  const isSelected = selected && isEqual(selected);\n  const isOffView = date && focusedItem && viewUnit && dates[viewUnit](date) !== dates[viewUnit](focusedItem);\n\n  const handleChange = () => {\n    onChange(clamp(date, min, max));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    role: \"gridcell\",\n    title: label,\n    \"aria-label\": label,\n    \"aria-readonly\": disabled,\n    \"aria-selected\": Boolean(isSelected),\n    tabIndex: isFocused ? 0 : void 0,\n    onClick: !isDisabled ? handleChange : undefined,\n    className: cn('rw-cell', // isNow && 'rw-now',\n    isDisabled && 'rw-state-disabled', isEmpty && 'rw-cell-not-allowed', isOffView && 'rw-cell-off-range', isSelected && 'rw-state-selected')\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": true\n  }, children));\n}\n\nCalendarView.Body = props => /*#__PURE__*/React.createElement(\"div\", _extends({\n  role: \"rowgroup\",\n  className: \"rw-calendar-body\"\n}, props));\n\nCalendarView.Row = props => /*#__PURE__*/React.createElement(\"div\", _extends({\n  role: \"row\",\n  className: \"rw-calendar-row\"\n}, props));\n\nCalendarView.Cell = CalendarViewCell;\nexport default CalendarView;","map":{"version":3,"sources":["/home/mike/proj/frontend/ui/node_modules/react-widgets/esm/CalendarView.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","cn","React","useEffect","useRef","dates","useFocusManager","clamp","date","min","max","CalendarView","className","focusedItem","onKeyDown","children","labelledby","ref","focusEvents","focused","_node$querySelector","node","current","querySelector","focus","createElement","role","tabIndex","CalendarViewCell","onChange","unit","disabled","selected","viewUnit","label","isEqual","nextDate","eq","isEmpty","inRange","isDisabled","isFocused","isSelected","isOffView","handleChange","title","Boolean","onClick","undefined","Body","props","Row","Cell"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport cn from 'classnames';\nimport React, { useEffect, useRef } from 'react';\nimport dates from './dates';\nimport useFocusManager from './useFocusManager';\n\nfunction clamp(date, min, max) {\n  return dates.max(dates.min(date, max), min);\n}\n\nfunction CalendarView({\n  className,\n  focusedItem,\n  onKeyDown,\n  children,\n  'aria-labelledby': labelledby\n}) {\n  const ref = useRef(null);\n  const [focusEvents, focused] = useFocusManager(ref);\n  useEffect(() => {\n    var _node$querySelector;\n\n    const node = ref.current;\n    if (!node || !focused) return;\n    (_node$querySelector = node.querySelector('.rw-cell[tabindex]')) == null ? void 0 : _node$querySelector.focus();\n  }, [focusedItem, focused, ref]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    role: \"grid\",\n    ref: ref,\n    tabIndex: -1\n  }, focusEvents, {\n    onKeyDown: onKeyDown,\n    \"aria-labelledby\": labelledby,\n    className: cn(className, 'rw-nav-view', 'rw-calendar-grid')\n  }), children);\n}\n\nfunction CalendarViewCell({\n  onChange,\n  min,\n  max,\n  date,\n  unit,\n  disabled,\n  selected,\n  focusedItem,\n  viewUnit,\n  children,\n  label\n}) {\n  const isEqual = nextDate => dates.eq(date, nextDate, unit);\n\n  const isEmpty = !dates.inRange(date, min, max, unit);\n  const isDisabled = disabled || isEmpty; // const isNow = now && isEqual(now)\n\n  const isFocused = !disabled && !isEmpty && isEqual(focusedItem);\n  const isSelected = selected && isEqual(selected);\n  const isOffView = date && focusedItem && viewUnit && dates[viewUnit](date) !== dates[viewUnit](focusedItem);\n\n  const handleChange = () => {\n    onChange(clamp(date, min, max));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    role: \"gridcell\",\n    title: label,\n    \"aria-label\": label,\n    \"aria-readonly\": disabled,\n    \"aria-selected\": Boolean(isSelected),\n    tabIndex: isFocused ? 0 : void 0,\n    onClick: !isDisabled ? handleChange : undefined,\n    className: cn('rw-cell', // isNow && 'rw-now',\n    isDisabled && 'rw-state-disabled', isEmpty && 'rw-cell-not-allowed', isOffView && 'rw-cell-off-range', isSelected && 'rw-state-selected')\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": true\n  }, children));\n}\n\nCalendarView.Body = props => /*#__PURE__*/React.createElement(\"div\", _extends({\n  role: \"rowgroup\",\n  className: \"rw-calendar-body\"\n}, props));\n\nCalendarView.Row = props => /*#__PURE__*/React.createElement(\"div\", _extends({\n  role: \"row\",\n  className: \"rw-calendar-row\"\n}, props));\n\nCalendarView.Cell = CalendarViewCell;\nexport default CalendarView;"]},"metadata":{},"sourceType":"module"}